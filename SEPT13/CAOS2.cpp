#include <stdio.h>
#define max 501

int main(){
  int primes[502] = {0,0,1,2,2,3,3,4,4,4,4,5,5,6,6,6,6,7,7,8,8,8,8,9,9,9,9,9,9,10,10,11,11,11,11,11,11,12,12,12,12,13,13,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,18,18,18,18,18,18,19,19,19,19,20,20,21,21,21,21,21,21,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,24,24,25,25,25,25,26,26,27,27,27,27,28,28,29,29,29,29,30,30,30,30,30,30,30,30,30,30,30,30,30,30,31,31,31,31,32,32,32,32,32,32,33,33,34,34,34,34,34,34,34,34,34,34,35,35,36,36,36,36,36,36,37,37,37,37,37,37,38,38,38,38,39,39,39,39,39,39,40,40,40,40,40,40,41,41,42,42,42,42,42,42,42,42,42,42,43,43,44,44,44,44,45,45,46,46,46,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,47,47,47,47,47,48,48,48,48,49,49,50,50,50,50,51,51,51,51,51,51,52,52,53,53,53,53,53,53,53,53,53,53,54,54,54,54,54,54,55,55,55,55,55,55,56,56,56,56,56,56,57,57,58,58,58,58,58,58,59,59,59,59,60,60,61,61,61,61,61,61,61,61,61,61,62,62,62,62,62,62,62,62,62,62,62,62,62,62,63,63,63,63,64,64,65,65,65,65,66,66,66,66,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,68,68,68,68,68,68,68,68,68,68,69,69,70,70,70,70,71,71,71,71,71,71,72,72,72,72,72,72,72,72,73,73,73,73,73,73,74,74,74,74,74,74,75,75,75,75,76,76,76,76,76,76,77,77,77,77,77,77,77,77,78,78,78,78,79,79,79,79,79,79,79,79,80,80,80,80,80,80,80,80,80,80,81,81,82,82,82,82,82,82,82,82,82,82,83,83,84,84,84,84,84,84,85,85,85,85,86,86,86,86,86,86,87,87,87,87,87,87,87,87,88,88,88,88,89,89,90,90,90,90,91,91,91,91,91,91,91,91,91,91,91,91,92,92,92,92,92,92,92,92,93,93,93,93,94,94,94,94,94,94,94,94,95,95,95};

  int t1,n,m,i,j,count,l,r,t,b,z,min1,min2,min3;
  char dmp,a[max][max];
  scanf("%d\n",&t1);
  while(t1--){
    count = 0;    
    scanf("%d %d\n",&n,&m);
    for(i=0;i<n;i++){
      for(j=0;j<m;j++)
	scanf("%c",&a[i][j]);
      scanf("%c",&dmp);
    }
    for(i=2;i<n-2;i++){
      for(j=2;j<m-2;j++){	
	l=0;
	r=0;
	t=0;
	b=0;
	if(a[i][j] == '^'){		
	  z = j-1;
	  while( (z>=0) && (a[i][z]=='^')){	    
	      l++;
	      z--;
	  }
	  z = i-1;
	  while( (z>=0) && (a[z][j]=='^') ){
	      t++;
	      z--;
	  }
	  z = j+1;
	  while( (z<m) && (a[i][z]=='^') ){
	    r++;
	    z++;
	  }
	  z = i+1;
	  while( (z<n) && (a[z][j]=='^') ){	   
	    b++;
	    z++;
	  }
	}
	min1 = l>r?r:l;
	min2 = t>b?b:t;
	min3 = min1>min2?min2:min1;	
	if(min3 >= 2)
	  count += primes[min3];
      }
    }
    printf("%d\n",count);
  }
  return 0;
}


  /*
  int primes[502];
  int i;
  primes[0] = 0;
  primes[1] = 0;
  for(i=2;i<502;i++)
    primes[i] = 1;
  int pr;
  for(i=2;i<251;i++){
    if(primes[i]){
      pr = 2*i;
      while(pr<502){
	primes[pr] = 0;
	pr += i;
      }
    }
  }
  FILE* fp = fopen("counts.txt","w+");
  for(i=1;i<502;i++){
    primes[i] += primes[i-1];
    fprintf(fp,"%d,",primes[i]);
  }
  //  printf("\n");
  */
